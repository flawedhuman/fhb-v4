---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const allArtwork = await getCollection('artwork');
const sortedArtwork = allArtwork
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf());

const latestPiece = sortedArtwork[0];
const previousPiece = sortedArtwork[1];
---

<BaseLayout title="My Digital Art Portfolio">
  <h1>My Digital Art</h1>
  
  {latestPiece ? (
    <div>
      <h2>Latest Work: {latestPiece.data.title}</h2>
      <img src={latestPiece.data.image} alt={latestPiece.data.title} />
      <a href={`/artwork/${latestPiece.slug}`}>View Full Piece â†’</a>
    </div>
  ) : (
    <p>No artwork found!</p>
  )}

  {previousPiece && (
    <div style="margin-top: 2rem;">
      <h3>Previous Work:</h3>
      <a href={`/artwork/${previousPiece.slug}`}>
        <strong>{previousPiece.data.title}</strong>
      </a>
    </div>
  )}
</BaseLayout>